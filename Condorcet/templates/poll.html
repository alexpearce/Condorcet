{% extends "layout.html" %}
{% block body %}
  <h2>{{ title }}</h2>
  <p>Fill in the table below to order each candidate by your preference. The candidate selected in the first row is your first choice, the candidate selected in the second row is your second, and so on.</p>
  <p>Once you have filled in the table, click ‘Vote’. You will be presented with your choices before confirmation.</p>
  <p>You will cast your vote as <span class="important">{{session.user.fullname}}</span>.</p>

  <form action="{{ url_for('confirmVote') }}" method="POST">
  <table class="poll">
    <thead>
      <tr>
        <th></th>
        {% for f in fields %}
        <th>{{ '<br/>'.join(f.split(' ')) | safe }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {# We don't care about the list objects in this outer loop #}
      {% for _ in fields %}
      <tr>
        <td>Choice #{{ loop.index }}</td>
        {# Cache outer loop variable so we can use it inside inner loop #}
        {% set outer_loop = loop %}
        {% for field in fields %}
        <td data-column="{{ loop.index }}">
          <input type="radio" name="{{ outer_loop.index }}" value="{{ field }}">
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
  </table>
  <input type="submit" value="Vote" />
  </form>
{% endblock %}
